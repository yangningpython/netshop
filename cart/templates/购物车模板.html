<!DOCTYPE html>
<!-- saved from url=(0036)http://127.0.0.1:8000/cart/cart.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>首页</title>
    <link rel="stylesheet" href="./首页_files/login.css">
    <link rel="stylesheet" href="./首页_files/index.css">
    <link rel="stylesheet" href="./首页_files/detail.css">
    <link rel="stylesheet" href="./首页_files/carts.css">
    <link rel="stylesheet" href="./首页_files/reset.css">
    <link rel="stylesheet" href="./首页_files/mygxin.css">
    <script src="./首页_files/jquery.min.js.下载"></script>
    <script src="./首页_files/carts.js.下载"></script>

    
    

</head>
<body>

<div class="head">
    <div class="head-in">
        <ul class="options">
            <li class="sub"><a href="http://127.0.0.1:8000/?category=2#">我的订单</a></li>
            
            <li class="sub"><a href="http://127.0.0.1:8000/?category=2#">客户服务</a></li>
            <li class="sub"><a href="http://127.0.0.1:8000/cart/cart.html">我的购物车</a></li>
        </ul>

        
            <div class="register">欢迎<a href="http://127.0.0.1:8000/user/usercenter/">youtube@163.com</a></div>
        




    </div>
</div>
<div class="search">
    <ul class="items">
        <li class="item">
            <a href="http://127.0.0.1:8000/?category=2#">
                <img src="./首页_files/1_09.png">
                <p>10:00开抢</p>
            </a>
        </li>
        <li class="item">
            <a href="http://127.0.0.1:8000/?category=2#">
                <img src="./首页_files/1_11.png">
                <p>买手砍价</p>
            </a>
        </li>
        <li class="item">
            <a href="http://127.0.0.1:8000/?category=2#">
                <img src="./首页_files/1_13.png">
                <p>验货质检</p>
            </a>
        </li>
    </ul>
    <div class="input">
        <input type="" name="" value="请输入想找的宝贝">
        <img src="./首页_files/1_06.png">
    </div>
</div>

    
    <section class="cartMain">
        <div class="cartMain_hd">
            <ul class="order_lists cartTop">
                <li class="list_chk">
                    <!--所有商品全选-->
                    <input type="checkbox" id="all" class="whole_check" style="display: inline-block;position:relative;left: -8px;top: 4px">

                    全选
                </li>
                <li class="list_con">商品信息</li>
                <li class="list_info">商品参数</li>
                <li class="list_price">单价</li>
                <li class="list_amount">数量</li>
                <li class="list_sum">金额</li>
                <li class="list_op">操作</li>
            </ul>
        </div>

        <div class="cartBox">
            <div class="order_content">

            
                     <ul style="position: relative" class="order_lists" goodsid="5" sizeid="17" colorid="17">
                        <li class="list_chk">
                            <input type="checkbox" id="checkbox_2" class="son_check" style="display: inline-block;position:absolute;left: 21px;top: 54px">

                        </li>
                        <li class="list_con">
                            <div class="list_img"><a href="javascript:;"><img src="./首页_files/bai_mt1VrH5.jpg" alt=""></a></div>
                            <div class="list_text"><a href="javascript:;">秋装时尚印花复古时尚休闲两件套装裙子</a></div>
                        </li>
                        <li class="list_info">
                            <p>颜色：白色</p>
                            <p>尺寸：S</p>
                        </li>
                        <li class="list_price">
                            <p class="price">￥35.00</p>
                        </li>
                        <li class="list_amount">
                            <div class="amount_box">
                                <a href="javascript:;" class="reduce reSty" goodsid="5" colorid="17" sizeid="17">-</a>
                                <input type="text" value="5" class="sum" readonly="">
                                <a href="javascript:;" class="plus" goodsid="5" colorid="17" sizeid="17">+</a>
                            </div>
                        </li>
                        <li class="list_sum">
                            <p class="sum_price">￥175.0</p>
                        </li>
                        <li class="list_op">
                            <p class="del"><a href="javascript:;" class="delBtn" goodsid="5" colorid="17" sizeid="17">移除商品</a></p>
                        </li>
                    </ul>

            
                     <ul style="position: relative" class="order_lists" goodsid="4" sizeid="14" colorid="14">
                        <li class="list_chk">
                            <input type="checkbox" id="checkbox_2" class="son_check" style="display: inline-block;position:absolute;left: 21px;top: 54px">

                        </li>
                        <li class="list_con">
                            <div class="list_img"><a href="javascript:;"><img src="./首页_files/lv_cTMJg2K.jpg" alt=""></a></div>
                            <div class="list_text"><a href="javascript:;">梦娜世家2017女式新款修身中长款毛领时尚显瘦欧美气质羽绒服A88</a></div>
                        </li>
                        <li class="list_info">
                            <p>颜色：绿色</p>
                            <p>尺寸：160</p>
                        </li>
                        <li class="list_price">
                            <p class="price">￥99.00</p>
                        </li>
                        <li class="list_amount">
                            <div class="amount_box">
                                <a href="javascript:;" class="reduce reSty" goodsid="4" colorid="14" sizeid="14">-</a>
                                <input type="text" value="6" class="sum" readonly="">
                                <a href="javascript:;" class="plus" goodsid="4" colorid="14" sizeid="14">+</a>
                            </div>
                        </li>
                        <li class="list_sum">
                            <p class="sum_price">￥594.0</p>
                        </li>
                        <li class="list_op">
                            <p class="del"><a href="javascript:;" class="delBtn" goodsid="4" colorid="14" sizeid="14">移除商品</a></p>
                        </li>
                    </ul>

            


            </div>
        </div>
        <!--底部-->
        <div class="bar-wrapper">
            <div class="bar-right">
                <div class="piece">已选商品<strong class="piece_num" id="all_count">0</strong>件</div>
                <div class="totalMoney">共计: <strong class="total_text" id="all_price">0.00</strong></div>
                <div class="calBtn"><a href="javascript:;" id="jiesuan">结算</a></div>
            </div>
        </div>
    </section>


    <section class="model_bg" style="display: none;"></section>
    <section class="my_model" style="display: none;">
        <p class="title">删除宝贝<span class="closeModel">X</span></p>
        <p>您确认要删除该宝贝吗？</p>
        <div class="opBtn"><a href="javascript:;" class="dialog-sure">确定</a><a href="javascript:;" class="dialog-close">关闭</a>
        </div>
    </section>
    <input type="hidden" name="csrfmiddlewaretoken" value="JyaqZY2G1WlHajMF9aSD7GTIUKqBai918GdZmW8skri98iVfK7FipbnrGijHCf0A">



    
    <script>
        $('.plus').click(function(event){
            <!--将数据同步到服务器-->
            var csrfmiddlewaretoken = $('input[name="csrfmiddlewaretoken"]').val()
            var goodsid = $(this).attr('goodsid')
            var colorid = $(this).attr('colorid')
            var sizeid = $(this).attr('sizeid')


            var data={
                goodsid:goodsid,
                colorid:colorid,
                sizeid:sizeid,
                csrfmiddlewaretoken:csrfmiddlewaretoken,
                type:'plus'
            }
            $.ajax({
                async:false,
                url:'/cart/',
                data:data,
                type:'post',
                success:function(data) {

                },
                error:function(){
                    <!--按钮设置了两个点击事件-->
    
                    event.stopImmediatePropagation()
                }

            })
        })
          $('.reduce').click(function(event){
            <!--将数据同步到服务器-->
            if ($(this).next('input').val()<=1){
                event.stopImmediatePropagation()
                return;
            }
            var csrfmiddlewaretoken = $('input[name="csrfmiddlewaretoken"]').val()
            var goodsid = $(this).attr('goodsid')
            var colorid = $(this).attr('colorid')
            var sizeid = $(this).attr('sizeid')

            var data={
                goodsid:goodsid,
                colorid:colorid,
                sizeid:sizeid,
                csrfmiddlewaretoken:csrfmiddlewaretoken,
                type:'minus'
            }

            $.ajax({
                async:false,
                url:'/cart/',
                type:'post',
                data:data,
                success:function(data) {

                },
                error:function(){
                    <!--按钮设置了两个点击事件-->
    
                    event.stopImmediatePropagation()
                }

            })
        })
        $('.delBtn').click(function(){
            var goodsid= $(this).attr('goodsid');
            var colorid= $(this).attr('colorid');
            var sizeid= $(this).attr('sizeid');
            $('.dialog-sure').attr('goodsid',goodsid).attr('colorid',colorid).attr('sizeid',sizeid)
        })


        $('.dialog-sure').click(function(event){
            var goodsid= $(this).attr('goodsid');
            var colorid= $(this).attr('colorid');
            var sizeid= $(this).attr('sizeid');
            var csrfmiddlewaretoken = $('input[name="csrfmiddlewaretoken"]').val();

            var data={
                goodsid:goodsid,
                colorid:colorid,
                sizeid:sizeid,
                csrfmiddlewaretoken:csrfmiddlewaretoken,
                type:'delete'
            }

            $.ajax({
                type:'post',
                url:'/cart/',
                data:data,
                async:false,
                success:function(result) {

                },
                error:function(event){
                    //停止事件传播
                    event.stopImmediatePropagation()
                }

            })
        })

        //在购物车页面点击登录按钮后回转到购物车页面
        $('.sign > a').click(function(event){

            var link = $(this).attr('href')
            $(this).attr('href',link+"?redirct=cart")
        })

        //单击结算按钮
        $('#jiesuan').click(function(){


            cks = $('.son_check')
            var cartitem = []
            $.each(cks,function(index,ck){
                if($(ck).prop('checked')){
                    var goodsid = $(ck).parents('.order_lists').attr('goodsid')
                    var sizeid = $(ck).parents('.order_lists').attr('sizeid')
                    var colorid = $(ck).parents('.order_lists').attr('colorid')



                    cartitem.push(JSON.stringify({'goodsid':goodsid,'sizeid':sizeid,'colorid':colorid}))


                }
            })


            if(cartitem.length==0){
                return;
            }



            var url = '/order/?cartitems='+cartitem;
            $(this).attr('href',url);


        })

    </script>



</body></html>